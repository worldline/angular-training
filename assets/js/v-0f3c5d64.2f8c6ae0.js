"use strict";(self.webpackChunkangular_training=self.webpackChunkangular_training||[]).push([[69],{4696:(n,s,a)=>{a.r(s),a.d(s,{default:()=>J});var e=a(6252),t=a(3260),o=a(2843),c=a(7422),l=a(7151);const i=(0,e.uE)('<h1 id="services" tabindex="-1"><a class="header-anchor" href="#services" aria-hidden="true">#</a> Services</h1><p>Along with components and directives, services are one of the main building blocks of an Angular application.</p><p>A component&#39;s only concern should be displaying data and not managing it. Services are where the Angular team advocates placing the business logic and data management of the application. Having a clear separation between the presentation layer and the other processes of the application increases reusability and modularity.</p><p>Creating a service with the CLI is done as follows:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ng generate <span class="token function">service</span> services/example\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This will create the service and its associated test class in the <code>app/services</code> folder. It is a common practice to place services in a services folder, the CLI will create the folder if it doesn&#39;t already exists.</p><p>The following content is automatically generated in the <code>example.service.ts</code> file:</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@angular/core&#39;</span>\n\n<span class="token decorator"><span class="token at operator">@</span><span class="token function">Injectable</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  providedIn<span class="token operator">:</span> <span class="token string">&#39;root&#39;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ExampleService</span> <span class="token punctuation">{</span>\n\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When a component requires a service, the service should be injected in its class in the following manner:</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@angular/core&#39;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> ExampleService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;app/services/example.service&#39;</span>\n\n<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  selector<span class="token operator">:</span> <span class="token string">&#39;app-example&#39;</span><span class="token punctuation">,</span>\n  templateUrl<span class="token operator">:</span> <span class="token string">&#39;./example.component.html&#39;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ExampleComponent</span> <span class="token punctuation">{</span>\n  <span class="token keyword">private</span> <span class="token keyword">readonly</span> exampleService <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span>ExampleService<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="highlight-lines"><div class="highlight-line"> </div><br><br><br><br><br><br><br><div class="highlight-line"> </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Always declare a dependency to a service as private. Indeed the template should never directly access a service but always go through a property or a method exposed by the component class.</p></div><h2 id="dependency-injection" tabindex="-1"><a class="header-anchor" href="#dependency-injection" aria-hidden="true">#</a> Dependency Injection</h2><p>In the previous chapter, we&#39;ve injected services provided by the <code>@angular/router</code> library in the components needing them. If you are familiar with Spring, you may not have thought much about it as it&#39;s one of the framework&#39;s mechanisms.</p><p>At bootstrap, Angular creates an application-wide injector. If other injectors are needed, Angular will create them along the way. The injector creates dependencies (most often in the form of services), and maintains a container of dependency instances that it reuses if possible. The injector gets the information about how to create or retrieve a dependency from a provider. A service usually acts as its own provider.</p><p>You may not have realized, but we have already used providers. In the pipe chapter, to use the <code>UpperCasePipe</code> in the component class instead of in the template, we added it to the providers array of the component.</p><p>When Angular discovers that a component depends on a service, it first checks if the injector has any existing instances of that service. If a requested service instance doesn&#39;t yet exist, the injector makes one using the registered provider, and adds it to the injector before returning the service to Angular. When all requested services have been resolved and returned, Angular can call the component&#39;s constructor.</p><p>Dependencies can be provided at three levels:</p><ul><li><strong>root level:</strong> this is the default behaviour when creating a service with the CLI. That is what <code>providedIn: &#39;root&#39;</code> means. The <em>same instance</em> of the dependency is injected everywhere it is needed as if it were a singleton.</li><li><strong>route level:</strong> the dependency is added to the providers array of the <code>Route</code>. The route and its children get their own instance of the dependency</li><li><strong>component level:</strong> the dependency is added to the providers array of the component. Each instance of that component gets its own instance of the dependency.</li></ul><h2 id="practical-work-state-management" tabindex="-1"><a class="header-anchor" href="#practical-work-state-management" aria-hidden="true">#</a> Practical Work: State management</h2><ol><li>Generate an <code>AuthenticationService</code> with the CLI in the <code>app/services</code> folder</li><li>Move the <code>loggedIn</code> logic from the <code>App</code> component to the service</li><li>Inject the service in the <code>LoginFormComponent</code> and use it.</li><li>Implement a logout method in the authentication service and add a logout button in the <code>App</code> component that calls it and navigates back to the <code>LoginFormComponent</code>. Here is the html and css:</li></ol>',20),p=(0,e._)("div",{class:"language-html line-numbers-mode","data-ext":"html"},[(0,e._)("pre",{class:"language-html"},[(0,e._)("code",null,[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("button")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"class"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("logout"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("Logout"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("button")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("router-outlet")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("router-outlet")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),r=(0,e._)("div",{class:"language-scss line-numbers-mode","data-ext":"scss"},[(0,e._)("pre",{class:"language-scss"},[(0,e._)("code",null,[(0,e._)("span",{class:"token selector"},".logout "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token property"},"align-self"),(0,e._)("span",{class:"token punctuation"},":"),(0,e.Uk)(" end"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),u=(0,e.uE)('<ol start="5"><li>Conditionally show the Logout button depending on the <code>loggedIn</code> status of the user. Expose the signal from the <code>AuthenticationService</code> in the <code>app.ts</code> file to pass data from the service to the template (it is a good practice to always declare a service as private in the component class so you&#39;ll need a variable in the component).</li><li>Use a navigation guard to redirect the user who wants to access the film search page to <code>/login</code> if they are not authenticated (make the CanActivateFn return true if the route can be accessed else return a <code>UrlTree</code> via the <code>createUrlTree</code> method of the <code>Router</code> service). To future-proof the guard, add a returnUrl as a queryParam to the returned <code>UrlTree</code> so that the <code>LoginFormComponent</code> knows where to navigate back to after authentication and modify the <code>LoginFormComponent</code> accordingly. To generate the navigation guard use the following CLI command:</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ng generate guard guards/authentication\n<span class="token comment"># ? Which interfaces would you like to implement? CanActivate</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><details class="custom-container details"><summary>Help for injecting services into the guard function</summary><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> authenticationGuard<span class="token operator">:</span> <span class="token function-variable function">CanActivateFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>route<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> authenticationService <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span>AuthenticationService<span class="token punctuation">)</span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="custom-container details"><summary>Help for the UrlTree</summary><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">inject</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createUrlTree</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> queryParams<span class="token operator">:</span> <span class="token punctuation">{</span> returnUrl<span class="token operator">:</span> state<span class="token punctuation">.</span>url <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></details><details class="custom-container details"><summary>Expected result</summary><p><img src="'+t+'" alt="Visual result of the services practical work"></p><p><img src="'+o+'" alt="Visual result of the services practical work"></p></details><h2 id="the-httpclient" tabindex="-1"><a class="header-anchor" href="#the-httpclient" aria-hidden="true">#</a> The HttpClient</h2><p>In a Single Page Application (SPA), communication with the server is done via asynchronous HTTP requests (AJAX) or more specialized protocols such as WebSocket. We will see how to make these network requests from an Angular application.</p><p>Angular provides a module, the <code>HttpClientModule</code>, to make HTTP calls. The module provides an injectable service, the <code>HttpClient</code>, to make GET, POST, PATCH, DELETE and PUT requests. To inject the <code>HttpClient</code> in a service, first add the <code>HttpClientModule</code> to the providers array of the app in the <code>app.config.ts</code> file by passing it the <code>provideHttpClient()</code> function.</p><p>Here are a few examples:</p>',9),k=(0,e._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,e._)("pre",{class:"language-typescript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" Injectable"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" inject "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'@angular/core'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" HttpClient "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'@angular/common/http'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" Observable "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'rxjs'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" User "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'app/models/user/user'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" UserCreation "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'app/models/user/user-creation'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" UserEdition "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'app/models/user/user-edition'"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token decorator"},[(0,e._)("span",{class:"token at operator"},"@"),(0,e._)("span",{class:"token function"},"Injectable")]),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  providedIn"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'root'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"class"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"UserService"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" httpClient "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"inject"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("HttpClient"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n  "),(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" baseUrl "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'api/backoffice/users'"),(0,e.Uk)("\n\n  "),(0,e._)("span",{class:"token function"},"create"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("user"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" UserCreation"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" Observable"),(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("User"),(0,e._)("span",{class:"token operator"},">"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("httpClient"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token generic-function"},[(0,e._)("span",{class:"token function"},"post"),(0,e._)("span",{class:"token generic class-name"},[(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("User"),(0,e._)("span",{class:"token operator"},">")])]),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("baseUrl"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" user"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n\n  "),(0,e._)("span",{class:"token function"},"update"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("ref"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" user"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" UserEdition"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" Observable"),(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("User"),(0,e._)("span",{class:"token operator"},">"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("httpClient"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token generic-function"},[(0,e._)("span",{class:"token function"},"put"),(0,e._)("span",{class:"token generic class-name"},[(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("User"),(0,e._)("span",{class:"token operator"},">")])]),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token template-string"},[(0,e._)("span",{class:"token template-punctuation string"},"`"),(0,e._)("span",{class:"token interpolation"},[(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("baseUrl"),(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,e._)("span",{class:"token string"},"/"),(0,e._)("span",{class:"token interpolation"},[(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,e.Uk)("ref"),(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,e._)("span",{class:"token template-punctuation string"},"`")]),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" user"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n\n  "),(0,e._)("span",{class:"token function"},"getByUserReference"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("ref"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" Observable"),(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("User"),(0,e._)("span",{class:"token operator"},">"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("httpClient"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token generic-function"},[(0,e._)("span",{class:"token function"},"get"),(0,e._)("span",{class:"token generic class-name"},[(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("User"),(0,e._)("span",{class:"token operator"},">")])]),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token template-string"},[(0,e._)("span",{class:"token template-punctuation string"},"`"),(0,e._)("span",{class:"token interpolation"},[(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("baseUrl"),(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,e._)("span",{class:"token string"},"/"),(0,e._)("span",{class:"token interpolation"},[(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,e.Uk)("ref"),(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,e._)("span",{class:"token template-punctuation string"},"`")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),d=(0,e._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,e._)("pre",{class:"language-typescript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" Component"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" inject"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" signal "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'@angular/core'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" User "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'app/models/user/user'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" UserService "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'app/services/user.service'"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token decorator"},[(0,e._)("span",{class:"token at operator"},"@"),(0,e._)("span",{class:"token function"},"Component")]),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  selector"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'app-user'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  templateUrl"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'./user.component.html'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"class"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"UserComponent"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" userService "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"inject"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("UserService"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n  "),(0,e._)("span",{class:"token keyword"},"protected"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" user "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token generic-function"},[(0,e._)("span",{class:"token function"},"signal"),(0,e._)("span",{class:"token generic class-name"},[(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("User "),(0,e._)("span",{class:"token operator"},"|"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"undefined"),(0,e._)("span",{class:"token operator"},">")])]),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token keyword"},"undefined"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"protected"),(0,e.Uk)(" reference "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"''"),(0,e.Uk)("\n\n  "),(0,e._)("span",{class:"token function"},"getUser"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"void"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("userService"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"getByUserReference"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("reference"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"subscribe"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("user "),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("user"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"set"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("user"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),_=(0,e.uE)('<p>The methods from the <code>HttpClient</code> service return Observables. They will be covered in the next chapter about the RxJS library. An Observable is only executed once subscribed to via the <code>subscribe</code> method. The subscribe method is expecting at least one callback. It is most often provided as an arrow function.</p><h2 id="practical-work-calling-a-backend" tabindex="-1"><a class="header-anchor" href="#practical-work-calling-a-backend" aria-hidden="true">#</a> Practical Work: Calling a backend</h2><p>We will use an API (the <em>backend</em>) to authenticate users and search for films. This backend has already been developed and can be deployed locally using the following command line commands (clone in your usual repo folder):</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/worldline/vuejs-training-backend.git\n<span class="token builtin class-name">cd</span> vuejs-training-backend\n<span class="token function">npm</span> <span class="token function">install</span>\n<span class="token function">npm</span> start\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',4),m=(0,e._)("code",null,"npm start",-1),v={href:"https://www.omdbapi.com/apikey.aspx?__EVENTTARGET=freeAcct&__EVENTARGUMENT=&__LASTFOCUS=&__VIEWSTATE=%2FwEPDwUKLTIwNDY4MTIzNQ9kFgYCAQ9kFgICBw8WAh4HVmlzaWJsZWhkAgIPFgIfAGhkAgMPFgIfAGhkGAEFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYDBQtwYXRyZW9uQWNjdAUIZnJlZUFjY3QFCGZyZWVBY2N0oCxKYG7xaZwy2ktIrVmWGdWzxj%2FDhHQaAqqFYTiRTDE%3D&__VIEWSTATEGENERATOR=5E550F58&__EVENTVALIDATION=%2FwEdAAU%2BO86JjTqdg0yhuGR2tBukmSzhXfnlWWVdWIamVouVTzfZJuQDpLVS6HZFWq5fYpioiDjxFjSdCQfbG0SWduXFd8BcWGH1ot0k0SO7CfuulHLL4j%2B3qCcW3ReXhfb4KKsSs3zlQ%2B48KY6Qzm7wzZbR&at=freeAcct&Email=",target:"_blank",rel:"noopener noreferrer"},h={class:"custom-container tip"},U=(0,e._)("p",{class:"custom-container-title"},"TIP",-1),g={href:"http://localhost:3030/api-docs",target:"_blank",rel:"noopener noreferrer"},b=(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("Add to the "),(0,e._)("code",null,"src"),(0,e.Uk)(" folder the "),(0,e._)("code",null,"proxy.conf.json"),(0,e.Uk)(" file.")])],-1),y=(0,e._)("div",{class:"language-json line-numbers-mode","data-ext":"json"},[(0,e._)("pre",{class:"language-json"},[(0,e._)("code",null,[(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token property"},'"/api/**"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token property"},'"target"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"http://localhost:3030"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token property"},'"changeOrigin"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token boolean"},"true"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token property"},'"pathRewrite"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"^/api"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'""'),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),f=(0,e.uE)('<p>The proxy will divert all calls for http://localhost:4200/api to the server running at http://localhost:3030. It also makes sure we don&#39;t encounter any CORS issues (in the case the backend is not hosted on your machine). This configuration is only for the webpack or vite dev server the CLI provides to run the application on your machine in a dev environment. It will not be the configuration used in production.</p><ol start="2"><li>In the CLI configuration file - <code>angular.json</code> - add the <code>proxyConfig</code> option to the serve target:</li></ol><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>...\n<span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n  <span class="token property">&quot;builder&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@angular/build:dev-server&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;proxyConfig&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/proxy.conf.json&quot;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    ...\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span>\n...\n</code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Restart the project as you have change the CLI config (<code>angular.json</code>).</p><ol start="3"><li><p>Add <code>provideHttpClient()</code> to the <code>providers</code> array of the <code>appConfig</code> object in the <code>app.config.ts</code> file.</p></li><li><p>Create the interfaces/classes for the models used by the backend, add one file per model in the <code>models/authentication</code> folder:</p></li></ol>',5),w=(0,e._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,e._)("pre",{class:"language-typescript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"class"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"RegistrationRequest"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token function"},"constructor"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" email"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" password"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" firstname"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" lastname"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),x=(0,e._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,e._)("pre",{class:"language-typescript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"class"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"LoginRequest"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token function"},"constructor"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" email"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" password"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),C=(0,e._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,e._)("pre",{class:"language-typescript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" User "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'./user'"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"class"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"UserResponse"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token function"},"constructor"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" user"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" User"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" token"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),A=(0,e._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,e._)("pre",{class:"language-typescript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token comment"},"/* eslint-disable @typescript-eslint/naming-convention */"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"class"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"User"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token function"},"constructor"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" id"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"number"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" firstname"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" lastname"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" email"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" created_at"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"public"),(0,e.Uk)(" update_at"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token builtin"},"string"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),T=(0,e._)("code",null,"UserResponse",-1),I=(0,e._)("code",null,"Authorization: Bearer <token>",-1),j={href:"https://jwt.io/introduction",target:"_blank",rel:"noopener noreferrer"},q=(0,e._)("ol",{start:"5"},[(0,e._)("li",null,[(0,e.Uk)("Implement the "),(0,e._)("code",null,"register"),(0,e.Uk)(" and "),(0,e._)("code",null,"login"),(0,e.Uk)(" methods in the "),(0,e._)("code",null,"AuthenticationService"),(0,e.Uk)(" as follows:")])],-1),R=(0,e._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,e._)("pre",{class:"language-typescript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" httpClient "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"inject"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("HttpClient"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" baseUrl "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'api/user'"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" token "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token generic-function"},[(0,e._)("span",{class:"token function"},"signal"),(0,e._)("span",{class:"token generic class-name"},[(0,e._)("span",{class:"token operator"},"<"),(0,e._)("span",{class:"token builtin"},"string"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"|"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"null"),(0,e._)("span",{class:"token operator"},">")])]),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token keyword"},"null"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token function"},"login"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("loginRequest"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" LoginRequest"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" Observable"),(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("UserResponse"),(0,e._)("span",{class:"token operator"},">"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("httpClient"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token generic-function"},[(0,e._)("span",{class:"token function"},"post"),(0,e._)("span",{class:"token generic class-name"},[(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("UserResponse"),(0,e._)("span",{class:"token operator"},">")])]),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token template-string"},[(0,e._)("span",{class:"token template-punctuation string"},"`"),(0,e._)("span",{class:"token interpolation"},[(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("baseUrl"),(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,e._)("span",{class:"token string"},"/login"),(0,e._)("span",{class:"token template-punctuation string"},"`")]),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" loginRequest"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"pipe"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token function"},"tap"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("response "),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("token"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"set"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("response"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("token"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token function"},"register"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("loginRequest"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" LoginRequest"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" Observable"),(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("UserResponse"),(0,e._)("span",{class:"token operator"},">"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" registrationRequest "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"new"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"RegistrationRequest"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("\n    loginRequest"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("email"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    loginRequest"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("password"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token string"},"'John'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token string"},"'Smith'"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n  "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("httpClient"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token generic-function"},[(0,e._)("span",{class:"token function"},"post"),(0,e._)("span",{class:"token generic class-name"},[(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)("UserResponse"),(0,e._)("span",{class:"token operator"},">")])]),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token template-string"},[(0,e._)("span",{class:"token template-punctuation string"},"`"),(0,e._)("span",{class:"token interpolation"},[(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("baseUrl"),(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,e._)("span",{class:"token string"},"/register"),(0,e._)("span",{class:"token template-punctuation string"},"`")]),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" registrationRequest"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),S=(0,e._)("ol",{start:"6"},[(0,e._)("li",null,[(0,e.Uk)("The change in the call signature of the "),(0,e._)("code",null,"login"),(0,e.Uk)(" method will require a bit of refactoring in the "),(0,e._)("code",null,"LoginFormComponent"),(0,e.Uk)(":")])],-1),W=(0,e._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,e._)("pre",{class:"language-typescript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" router "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"inject"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("Router"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" activatedRoute "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"inject"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("ActivatedRoute"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" authenticationService "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"inject"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("AuthenticationService"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" loginRequest "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"computed"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"new"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"LoginRequest"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"email"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"password"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token function"},"login"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"void"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("authenticationService"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"login"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"loginRequest"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"subscribe"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(),(0,e._)("span",{class:"token function-variable function"},"next"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" postLoginRoute "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("activatedRoute"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("snapshot"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("queryParamMap"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"get"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'returnUrl'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("router"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"navigateByUrl"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("postLoginRoute "),(0,e._)("span",{class:"token operator"},"?"),(0,e.Uk)(),(0,e._)("span",{class:"token template-string"},[(0,e._)("span",{class:"token template-punctuation string"},"`"),(0,e._)("span",{class:"token string"},"/"),(0,e._)("span",{class:"token interpolation"},[(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,e.Uk)("postLoginRoute"),(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,e._)("span",{class:"token template-punctuation string"},"`")]),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"''"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token function"},"register"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"void"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("authenticationService"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"register"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"loginRequest"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"subscribe"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),E=(0,e._)("ol",{start:"7"},[(0,e._)("li",null,[(0,e.Uk)("Refactoring is also needed to keep the "),(0,e._)("code",null,"authenticationGuard"),(0,e.Uk)(" working. Make the "),(0,e._)("code",null,"loggedIn"),(0,e.Uk)(" variable in the "),(0,e._)("code",null,"AuthenticationService"),(0,e.Uk)(" a computed signal that depends on the "),(0,e._)("code",null,"token"),(0,e.Uk)(" signal. You will also need to refactor the logout to empty the "),(0,e._)("code",null,"token"),(0,e.Uk)(" signal value.")])],-1),H=(0,e._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,e._)("pre",{class:"language-typescript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" loggedIn "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"computed"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"token"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"!=="),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"null"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"})])],-1),L=(0,e._)("ol",{start:"8"},[(0,e._)("li",null,[(0,e.Uk)("Add a register button next to the login button in the "),(0,e._)("code",null,"LoginFormComponent"),(0,e.Uk)(", give it the attribute "),(0,e._)("code",null,'type="button"'),(0,e.Uk)(" so that Angular knows it is not this button that triggers the "),(0,e._)("code",null,"ngSubmit"),(0,e.Uk)(" event on the form and make it call the register method. You should now be able to register a user and login. If you are having trouble, "),(0,e._)("strong",null,"check the errors in the network tab"),(0,e.Uk)(" of the developer tools (preview tab of the network call in error), your email or password may not comply with the policy.")])],-1),F=(0,e._)("div",{class:"language-html line-numbers-mode","data-ext":"html"},[(0,e._)("pre",{class:"language-html"},[(0,e._)("code",null,[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("div")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"class"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("button-container"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("button")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"type"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("button"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("Register"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("button")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("button")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"type"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("submit"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("Login"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("button")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("div")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),P=(0,e._)("div",{class:"language-scss line-numbers-mode","data-ext":"scss"},[(0,e._)("pre",{class:"language-scss"},[(0,e._)("code",null,[(0,e._)("span",{class:"token selector"},".button-container "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token property"},"display"),(0,e._)("span",{class:"token punctuation"},":"),(0,e.Uk)(" flex"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token property"},"justify-content"),(0,e._)("span",{class:"token punctuation"},":"),(0,e.Uk)(" space-between"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),O=(0,e.uE)('<ol start="9"><li>It is time to handle errors. The subscribe method can be passed an object that takes three callbacks: a <em>next</em>, an <em>error</em> and a <em>complete</em> (we will look at this in more details in the next chapter). Declare an <code>errorMessage</code> signal in the <code>LoginFormComponent</code> class and set it with the error information retrieved from the argument of the <code>error</code> callback. Display the error message on the form. Check that the error message is actually shown when you login with incorrect credentials.</li></ol>',1),G=(0,e._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,e._)("pre",{class:"language-typescript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"protected"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"readonly"),(0,e.Uk)(" errorMessage "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"signal"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"''"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token keyword"},"private"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"errorHandler"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("errorResponse"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" HttpErrorResponse"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"void"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("errorMessage"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"set"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("errorResponse"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("error"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("error "),(0,e._)("span",{class:"token operator"},"??"),(0,e.Uk)(),(0,e._)("span",{class:"token template-string"},[(0,e._)("span",{class:"token template-punctuation string"},"`"),(0,e._)("span",{class:"token interpolation"},[(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,e.Uk)("errorResponse"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("error"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("status"),(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,e._)("span",{class:"token string"}," - "),(0,e._)("span",{class:"token interpolation"},[(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,e.Uk)("errorResponse"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("error"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("statusText"),(0,e._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,e._)("span",{class:"token template-punctuation string"},"`")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},"// subscribe syntax"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("authenticationService"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"login"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"loginRequest"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"subscribe"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function-variable function"},"next"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" response "),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"/* insert code here */"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function-variable function"},"error"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" errorResponse "),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"/* insert code here */"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"}),(0,e._)("div",{class:"line-number"})])],-1),V=(0,e.uE)('<div class="custom-container tip"><p class="custom-container-title">hint</p><p>For a better UX (User eXperience), do not forget to clear the <code>errorMessage</code> field before launching a new login or registration request or as soon as a register or login succeeds.</p></div><ol start="10"><li>Let&#39;s now call the backend to get the list of films. The route is secured which means that passing the token in the header is necessary. Angular provides a mechanism - http interceptors - to systematically intercept http requests, allowing to define the headers in one place.</li></ol><p>a. Use the CLI to generate one: <code>ng generate interceptor interceptors/authentication</code>.</p><p>b. Here is its implementation:</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> HttpInterceptorFn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@angular/common/http&#39;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> AuthenticationService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;app/services/authentication.service&#39;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@angular/core&#39;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">const</span> authenticationInterceptor<span class="token operator">:</span> <span class="token function-variable function">HttpInterceptorFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span>AuthenticationService<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">token</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> cloned <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      headers<span class="token operator">:</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;Authorization&#39;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n    <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>cloned<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If there is a token in the <code>AuthenticationService</code>, the interceptor will add it to the http request&#39;s headers.</p><p>c. Add the interceptor to the <code>HttpClient</code> provider in the <code>appConfig</code> object:</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">provideHttpClient</span><span class="token punctuation">(</span><span class="token function">withInterceptors</span><span class="token punctuation">(</span><span class="token punctuation">[</span>authenticationInterceptor<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="11"><li>Create a <code>FilmService</code> using the CLI and implement the call to the <code>api/movies/search</code> endpoint. Note that the <code>title</code> queryParam is not optional. To add query params to a request, use the <code>options</code> parameter of the get method.</li></ol><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>\n  params<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">HttpParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;title&#39;</span><span class="token punctuation">,</span> title<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="12"><li><p>Make changes to the <code>FilmSearchComponent</code> to call this new service with the title filled in by the user, save the response to the <code>films</code> signal field in the <code>FilmSearchComponent</code> class.</p></li><li><p>Check that the token is sent as a HTTP header via the developer tools of your browser.</p></li></ol><details class="custom-container details"><summary>Expected result</summary><p><img src="'+c+'" alt="Visual result of the http practical work"></p><p><img src="'+l+'" alt="Visual result of the http practical work"></p></details><h2 id="to-go-further-httpresource" tabindex="-1"><a class="header-anchor" href="#to-go-further-httpresource" aria-hidden="true">#</a> To go further: HttpResource</h2>',13),D=(0,e._)("code",null,"HttpClient",-1),z=(0,e._)("code",null,"rxjs",-1),Y=(0,e._)("code",null,"zone.js",-1),M=(0,e._)("code",null,"HttpClient",-1),N=(0,e._)("code",null,"HttpResource",-1),B={href:"https://angular.dev/guide/http/http-resource",target:"_blank",rel:"noopener noreferrer"},Z={},J=(0,a(3744).Z)(Z,[["render",function(n,s){const a=(0,e.up)("CodeGroupItem"),t=(0,e.up)("CodeGroup"),o=(0,e.up)("ExternalLinkIcon");return(0,e.wg)(),(0,e.iD)("div",null,[i,(0,e.Wm)(t,null,{default:(0,e.w5)((()=>[(0,e.Wm)(a,{title:"app.html"},{default:(0,e.w5)((()=>[p])),_:1}),(0,e.Wm)(a,{title:"app.scss"},{default:(0,e.w5)((()=>[r])),_:1})])),_:1}),u,(0,e.Wm)(t,null,{default:(0,e.w5)((()=>[(0,e.Wm)(a,{title:"Service"},{default:(0,e.w5)((()=>[k])),_:1}),(0,e.Wm)(a,{title:"Component"},{default:(0,e.w5)((()=>[d])),_:1})])),_:1}),_,(0,e._)("p",null,[(0,e.Uk)("The "),m,(0,e.Uk)(" command will ask you for an API key. Either wait on the instructor to give it to you, alternatively, you can generate one "),(0,e._)("a",v,[(0,e.Uk)("here"),(0,e.Wm)(o)])]),(0,e._)("div",h,[U,(0,e._)("p",null,[(0,e.Uk)("The backend interface contract is available here: "),(0,e._)("a",g,[(0,e.Uk)("api-docs"),(0,e.Wm)(o)])])]),b,(0,e.Wm)(t,null,{default:(0,e.w5)((()=>[(0,e.Wm)(a,{title:"proxy.conf.json"},{default:(0,e.w5)((()=>[y])),_:1})])),_:1}),f,(0,e.Wm)(t,null,{default:(0,e.w5)((()=>[(0,e.Wm)(a,{title:"registration-request.ts"},{default:(0,e.w5)((()=>[w])),_:1}),(0,e.Wm)(a,{title:"login-request.ts"},{default:(0,e.w5)((()=>[x])),_:1}),(0,e.Wm)(a,{title:"user-response.ts"},{default:(0,e.w5)((()=>[C])),_:1}),(0,e.Wm)(a,{title:"user.ts"},{default:(0,e.w5)((()=>[A])),_:1})])),_:1}),(0,e._)("p",null,[(0,e.Uk)("Note the token in the "),T,(0,e.Uk)(", it will serve to authenticate the user via the Authorization header: "),I,(0,e.Uk)(". Learn more about JWT "),(0,e._)("a",j,[(0,e.Uk)("here"),(0,e.Wm)(o)]),(0,e.Uk)(".")]),q,(0,e.Wm)(t,null,{default:(0,e.w5)((()=>[(0,e.Wm)(a,{title:"authentication.service.ts"},{default:(0,e.w5)((()=>[R])),_:1})])),_:1}),S,(0,e.Wm)(t,null,{default:(0,e.w5)((()=>[(0,e.Wm)(a,{title:"login-form.component.ts"},{default:(0,e.w5)((()=>[W])),_:1})])),_:1}),E,(0,e.Wm)(t,null,{default:(0,e.w5)((()=>[(0,e.Wm)(a,{title:"authentication.service.ts"},{default:(0,e.w5)((()=>[H])),_:1})])),_:1}),L,(0,e.Wm)(t,null,{default:(0,e.w5)((()=>[(0,e.Wm)(a,{title:"HTML"},{default:(0,e.w5)((()=>[F])),_:1}),(0,e.Wm)(a,{title:"SCSS"},{default:(0,e.w5)((()=>[P])),_:1})])),_:1}),O,(0,e.Wm)(t,null,{default:(0,e.w5)((()=>[(0,e.Wm)(a,{title:"login-form.component.ts"},{default:(0,e.w5)((()=>[G])),_:1})])),_:1}),V,(0,e._)("p",null,[(0,e.Uk)("The "),D,(0,e.Uk)(" makes use of Observables from the "),z,(0,e.Uk)(" library. Having two reactivity models (Observables and signals) competing in the same framework may seem strange. Observables have been around since the first version of Angular and are mainly encountered whilst making http calls or interacting with reactive forms, they were not necessary everywhere thanks to "),Y,(0,e.Uk)(". They shine in complex reactive use cases that don't form the bulk of an Angular application code base but that are essential to the proper running of your application. Signals won't take over the role of Observables as they offer a less powerful API, however they will replace Observables in many simpler cases. There's a signal-based wrapper for the "),M,(0,e.Uk)(" called "),N,(0,e.Uk)(" that was introduced in Angular 19.2 as experimental. You can explore its capabilities "),(0,e._)("a",B,[(0,e.Uk)("here"),(0,e.Wm)(o)]),(0,e.Uk)(". It is advised to only use it for GET requests.")])])}]])},4881:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e=JSON.parse('{"key":"v-0f3c5d64","path":"/en/services.html","title":"Services","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Dependency Injection","slug":"dependency-injection","link":"#dependency-injection","children":[]},{"level":2,"title":"Practical Work: State management","slug":"practical-work-state-management","link":"#practical-work-state-management","children":[]},{"level":2,"title":"The HttpClient","slug":"the-httpclient","link":"#the-httpclient","children":[]},{"level":2,"title":"Practical Work: Calling a backend","slug":"practical-work-calling-a-backend","link":"#practical-work-calling-a-backend","children":[]},{"level":2,"title":"To go further: HttpResource","slug":"to-go-further-httpresource","link":"#to-go-further-httpresource","children":[]}],"git":{},"filePathRelative":"en/services.md"}')},2843:(n,s,a)=>{n.exports=a.p+"assets/img/visual-6.506c9e0c.png"},3260:(n,s,a)=>{n.exports=a.p+"assets/img/visual-6a.b5c6adb8.png"},7422:(n,s,a)=>{n.exports=a.p+"assets/img/visual-7a.81fa3d56.png"},7151:(n,s,a)=>{n.exports=a.p+"assets/img/visual-7b.2b988ec0.png"}}]);