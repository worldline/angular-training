"use strict";(self.webpackChunkangular_training=self.webpackChunkangular_training||[]).push([[614],{3366:(n,s,e)=>{e.r(s),e.d(s,{default:()=>tn});var a=e(6252);const t=(0,a._)("h1",{id:"rxjs",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#rxjs","aria-hidden":"true"},"#"),(0,a.Uk)(" RxJS")],-1),o={href:"https://rxjs.dev/guide/overview",target:"_blank",rel:"noopener noreferrer"},p={href:"http://reactivex.io/",target:"_blank",rel:"noopener noreferrer"},l=(0,a.uE)("<p>Le modèle ReactiveX d&#39;<code>Observable</code> vous permet de traiter des flux d&#39;événements asynchrones avec le même type d&#39;opérations simples et composables que vous utilisez pour des collections d&#39;éléments de données comme des tableaux, des opérations telles que <code>filter</code>, <code>map</code>, <code>flatMap</code>, <code> reduce</code> et bien d&#39;autres. Il vous libère d&#39;enchevêtrements de callbacks et rend ainsi votre code plus lisible et moins sujet aux bugs.</p><p>La librairie fournit le type <code>Observable</code> ainsi que des fonctions utilitaires pour :</p><ul><li>convertir le code existant lié aux opérations asynchrones en observables</li><li>itérer à travers les valeurs d&#39;un flux</li><li>mapper des valeurs à différents types</li><li>filtrer des flux</li><li>détecter les erreurs</li><li>composer plusieurs flux</li></ul><p>Ce chapitre n&#39;entrera pas en profondeur dans les concepts de Rx, vous pouvez vous référer à la documentation officielle à cet effet. Cependant, il illustrera des situations courantes rencontrées dans les applications Angular.</p>",4),i={class:"custom-container warning"},c=(0,a._)("p",{class:"custom-container-title"},"WARNING",-1),r={href:"https://rxjs.dev/",target:"_blank",rel:"noopener noreferrer"},u=(0,a.uE)('<h2 id="l-observable" tabindex="-1"><a class="header-anchor" href="#l-observable" aria-hidden="true">#</a> L&#39;Observable</h2><p>Le chapitre précédent vous a montré l&#39;utilisation de base des Observables. Voici ce que nous y avons vu :</p><ul><li>Les observables sont renvoyés par les méthodes du service <code>HttpClient</code>.</li><li>Les observables ne sont exécutés qu&#39;une fois subscribed</li><li>La méthode subscribe prend un objet constitué de trois callbacks (next, error and complete) en paramètre.</li></ul><p>Tout d&#39;abord, illustrons les deuxième et troisième points :</p><iframe height="500" width="100%" src="https://stackblitz.com/github/ocunidee/atpw-observable/tree/master?ctl=1&amp;embed=1&amp;file=src/app/app.component.ts&amp;hideExplorer=1&amp;hideNavigation=1&amp;title=Observable"></iframe><p>L&#39;<code>Observable</code> déclenche 3 notifications next suivies d&#39;une notification complete. Un Observable arrête d&#39;émettre des valeurs parce qu&#39;elles sont erronées (callback error) ou parce qu&#39;elles se terminent (callback complete). Les deux événements s&#39;excluent mutuellement.</p><h2 id="creation-d-observable" tabindex="-1"><a class="header-anchor" href="#creation-d-observable" aria-hidden="true">#</a> Création d&#39;Observable</h2><p>Dans une application Angular, vous aurez rarement à créer vous-même des observables. La plupart du temps, vous gérerez les flux que le framework a créés pour vous, tels que la gestion des résultats d&#39;appels http, l&#39;écoute d&#39;événements du routeur ou l&#39;écoute d&#39;événements de formulaire lors de l&#39;utilisation du <code>ReactiveFormsModule</code> (le nom du module révèle sa nature réactive). Cependant, vous pouvez rencontrer des situations où il peut vous incomber de créer un flux. Voici les principales façons dont cela pourrait se produire.</p>',8),d={href:"https://rxmarbles.com/#interval",target:"_blank",rel:"noopener noreferrer"},k={href:"https://rxjs.dev/api/index/function/interval",target:"_blank",rel:"noopener noreferrer"},m=(0,a.uE)('<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">interval</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>\n  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">next</span><span class="token operator">:</span> n <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">It&#39;s been </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> seconds since subscribing!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',1),b={href:"https://rxmarbles.com/#from",target:"_blank",rel:"noopener noreferrer"},v={href:"https://rxjs.dev/api/index/function/from",target:"_blank",rel:"noopener noreferrer"},_=(0,a.uE)('<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> promise1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token function">from</span><span class="token punctuation">(</span>promise1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token function-variable function">next</span><span class="token operator">:</span> message <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The delayed message is &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token function-variable function">error</span><span class="token operator">:</span> error <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>promiseMessage <span class="token operator">=</span> <span class="token string">&#39;There\\&#39;s been an error&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Completed&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',1),g={href:"https://rxjs.dev/api/index/function/fromEvent",target:"_blank",rel:"noopener noreferrer"},h=(0,a.uE)('<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">fromEvent</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&#39;click&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">next</span><span class="token operator">:</span> _ <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Clicked!&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Le Stackblitz suivant vous permet de jouer avec ces exemples :</p><iframe height="500" width="100%" src="https://stackblitz.com/github/ocunidee/atpw-observable-creation/tree/master?ctl=1&amp;embed=1&amp;file=src/app/app.component.ts&amp;hideExplorer=1&amp;title=Observable%20creation"></iframe><h2 id="filtrage-et-mapping" tabindex="-1"><a class="header-anchor" href="#filtrage-et-mapping" aria-hidden="true">#</a> Filtrage et mapping</h2>',4),f=(0,a._)("code",null,"Array.prototype.map",-1),U=(0,a._)("code",null,"map",-1),x={href:"https://rxmarbles.com/#map",target:"_blank",rel:"noopener noreferrer"},y={href:"https://rxjs.dev/api/operators/map",target:"_blank",rel:"noopener noreferrer"},w=(0,a._)("code",null,"Observable",-1),q=(0,a._)("p",null,"Transformons l'exemple précédent concernant l'événement click sur le document pour qu'il imprime les coordonnées du clic :",-1),E=(0,a._)("iframe",{height:"500",width:"100%",src:"https://stackblitz.com/github/ocunidee/atpw-rx-operators/tree/master?ctl=1&embed=1&file=src/app/app.component.ts&hideExplorer=1&hideNavigation=1&title=Mapping%20and%20Filtering"},null,-1),z=(0,a._)("div",{class:"custom-container tip"},[(0,a._)("p",{class:"custom-container-title"},"Pipe"),(0,a._)("p",null,[(0,a._)("code",null,"pipe()"),(0,a.Uk)(" est une fonction utilisée pour composer des opérateurs tels que "),(0,a._)("code",null,"map()"),(0,a.Uk)(", "),(0,a._)("code",null,"filter()"),(0,a.Uk)(", "),(0,a._)("code",null,"take()"),(0,a.Uk)("... Les opérateurs sont appliqués au flux dans l'ordre où ils sont passés à la fonction pipe")])],-1),C=(0,a._)("code",null,"Array.prototype.filter",-1),O=(0,a._)("code",null,"filter",-1),j={href:"https://rxmarbles.com/#filter",target:"_blank",rel:"noopener noreferrer"},S={href:"https://rxjs.dev/api/operators/filter",target:"_blank",rel:"noopener noreferrer"},R=(0,a.uE)('<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">filter</span><span class="token punctuation">(</span>data <span class="token operator">=&gt;</span> data <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">next</span><span class="token operator">:</span> data <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Cet extrait affichera :</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">2</span>\n<span class="token number">4</span>\n<span class="token number">6</span>\n<span class="token number">8</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Exercice : En utilisant le Stackblitz précédent sur l&#39;opération map, ne mettez à jour le message que pour les clics effectués dans les coordonnées comprises entre 0-100 sur les axes x et y.</strong></p><h2 id="la-gestion-des-erreurs" tabindex="-1"><a class="header-anchor" href="#la-gestion-des-erreurs" aria-hidden="true">#</a> La gestion des erreurs</h2><p>Comme vu précédemment, la méthode <code>subscribe</code> prend un en paramètre un object qui a une callback <code>error</code>. Lorsque l&#39;<code>Observable</code> émet en erreur, elle est exécutée à la place de la callback <code>next</code> et l&#39;<code>Observable</code> cesse d&#39;émettre.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>userService<span class="token punctuation">.</span><span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token function-variable function">next</span><span class="token operator">:</span> users <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The following users exist in the system: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>users<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">error</span><span class="token operator">:</span> error <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">An error occurred: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Completed&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',7),P=(0,a._)("code",null,"catchError",-1),L={href:"https://rxjs.dev/api/operators/catchError",target:"_blank",rel:"noopener noreferrer"},N=(0,a._)("code",null,"next",-1),W=(0,a._)("code",null,"error",-1),A=(0,a.uE)('<p>Imaginons que vous vous attendiez à un tableau d&#39;utilisateurs du backend mais qu&#39;il vous renvoie une erreur HTTP 404, vous pouvez utiliser <code>catchError</code> pour renvoyer un tableau vide à la place, et continuer à générer une erreur pour d&#39;autres erreurs HTTP.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>userService<span class="token punctuation">.</span><span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>\n    <span class="token function">catchError</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>error <span class="token keyword">as</span> HttpErrorResponse<span class="token punctuation">)</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token keyword">of</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token keyword">return</span> <span class="token function">throwError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">)</span>\n  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token function-variable function">next</span><span class="token operator">:</span> users <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The following users exist in the system: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>users<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">error</span><span class="token operator">:</span> error <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">An error occurred: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Completed&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Question : Qu&#39;est-ce qui sera imprimé sur la console en cas d&#39;erreur 404 renvoyée par le backend ? En cas de 500 ?</strong></p><h2 id="composition-de-flux" tabindex="-1"><a class="header-anchor" href="#composition-de-flux" aria-hidden="true">#</a> Composition de flux</h2><p>Les flux peuvent être composés à de nombreuses fins. Pour étudier cette notion dans un environnement plus simple, nous ne l&#39;étudierons que dans le cadre d&#39;appels backend.</p>',5),M=(0,a._)("code",null,"switchMap",-1),T={href:"https://rxjs.dev/api/operators/switchMap",target:"_blank",rel:"noopener noreferrer"},I={href:"https://rxmarbles.com/#switchMap",target:"_blank",rel:"noopener noreferrer"},J=(0,a._)("iframe",{height:"500",width:"100%",src:"https://stackblitz.com/edit/switchmap-training?ctl=1&devtoolsheight=33&embed=1&file=index.ts&hideExplorer=1&hideNavigation=1&title=SwitchMap%20exemple"},null,-1),D=(0,a._)("p",null,[(0,a._)("strong",null,"Question : A partir de cet exemple, qu'apprenez-vous sur le fonctionnement de switchMap ? (Regarder le diagramme marble peut aider)"),(0,a.Uk)(" Adaptons l'exemple ci-dessus au contexte des appels backend chaînés :")],-1),F=(0,a._)("iframe",{height:"500",width:"100%",src:"https://stackblitz.com/github/ocunidee/atpw-switchMap/tree/master?ctl=1&embed=1&file=src/app/app.component.ts&hideExplorer=1&hideNavigation=1&title=SwitchMap%20exercise"},null,-1),H=(0,a._)("code",null,"exhaustMap",-1),Q={href:"https://rxjs.dev/api/operators/exhaustMap",target:"_blank",rel:"noopener noreferrer"},V=(0,a._)("code",null,"switchMap",-1),$=(0,a.uE)('<div class="custom-container danger"><p class="custom-container-title">Ne pas imbriquer les subscribes</p><p>Un piège très courant avec RxJS est d&#39;imbriquer des subscribes. RxJS fournit de nombreux opérateurs afin que vous n&#39;ayez jamais à mélanger du code synchrone et asynchrone. Pourquoi ne pas les mélanger ?</p><ul><li>c&#39;est du code spaghetti qui devient difficile à lire et à maintenir car il ne bénéficie plus du caractère déclaratif de RxJS,</li><li>cela rend difficile de composer des observables,</li><li>cela provoque des fuites de mémoire.</li></ul><p>Le plus souvent, on le fait sans s&#39;en rendre compte. Par exemple, dans la callback next d&#39;un subscribe, vous appelez une méthode qui a un subscribe. C&#39;est de l&#39;imbrication de subscribes.</p><p>Exemple de ce que vous ne devriez PAS faire :</p><iframe height="500" width="100%" src="https://stackblitz.com/github/ocunidee/atpw-switchMap/tree/nested-subscribe?ctl=1&amp;embed=1&amp;file=src/app/app.component.ts&amp;hideExplorer=1&amp;hideNavigation=1&amp;title=Don&#39;t nest subscribes"></iframe></div><h2 id="unsubscribing" tabindex="-1"><a class="header-anchor" href="#unsubscribing" aria-hidden="true">#</a> Unsubscribing</h2><p>Pour le moment nous avons vu comment subscribe à un Observable. Pour éviter les fuites de mémoire avec les Observables de longue durée, vous devez vous unsubscribe de leur flux.</p><p>Réutilisons notre exemple de routage précédent pour illustrer comment les fuites mémoire peuvent se produire. Un Observable interval est créé dans la méthode ngOnInit du composant de détails du livre. <strong>Accédez aux détails d&#39;un livre et regardez la console. Puis quittez la page et revenez. Que se passe-t-il dans la console ? Qu&#39;est-ce que ça veut dire ?</strong></p><iframe height="500" width="100%" src="https://stackblitz.com/github/ocunidee/atpw-routing/tree/memory-leak?ctl=1&amp;embed=1&amp;file=src/app/book-details/book-details.component.ts&amp;hideExplorer=1&amp;hideNavigation=1&amp;title=Memory leak"></iframe><p>Quand unsubscribe ? Si vous n&#39;avez aucune certitude que l&#39;<code>Observable</code> s&#39;achèvera ou qu&#39;il produira une erreur, vous devez unsubscribe manuellement. Le <code>HttpClient</code> complète toujours l&#39;Observable qu&#39;il renvoie après avoir reçu une réponse. Donc, théoriquement, si vous ne rencontrez que des Observables du <code>HttpClient</code>, vous n&#39;avez pas à unsubscribe. Dans les autres cas, <strong>soyez prudent et unsubscribe</strong>.</p><p>Comment unsubscribe ? En utilisant l&#39;opérateur <code>takeUntilDestroyed</code> et en lui passant un <code>destroyRef</code>.</p><p>Corrigons la fuite de mémoire de l&#39;exemple précédent.</p><iframe height="500" width="100%" src="https://stackblitz.com/github/ocunidee/atpw-routing/tree/memory-leak-fix?ctl=1&amp;embed=1&amp;file=src/app/book-details/book-details.component.ts&amp;hideExplorer=1&amp;hideNavigation=1&amp;title=takeUntilDestroyed"></iframe><h2 id="pipe-async" tabindex="-1"><a class="header-anchor" href="#pipe-async" aria-hidden="true">#</a> Pipe async</h2><p>Invoquer la méthode subscribe sur un <code>Observable</code> et enregistrer la valeur dans une propriété du composant n&#39;est pas le seul moyen d&#39;afficher les valeurs de l&#39;<code>Observable</code>. Angular fournit un pipe à appliquer directement sur un <code>Observable</code>.</p>',11),G=(0,a._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,a._)("pre",{class:"language-typescript"},[(0,a._)("code",null,[(0,a._)("span",{class:"token keyword"},"export"),(0,a.Uk)(),(0,a._)("span",{class:"token keyword"},"class"),(0,a.Uk)(),(0,a._)("span",{class:"token class-name"},"AppComponent"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n  counter"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(" Observable"),(0,a._)("span",{class:"token operator"},"<"),(0,a._)("span",{class:"token builtin"},"number"),(0,a._)("span",{class:"token operator"},">"),(0,a.Uk)(),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(),(0,a._)("span",{class:"token function"},"interval"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token number"},"1000"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n")])]),(0,a._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"})])],-1),X=(0,a._)("div",{class:"language-html line-numbers-mode","data-ext":"html"},[(0,a._)("pre",{class:"language-html"},[(0,a._)("code",null,[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"<"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("{{counter | async}}"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"</"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("\n")])]),(0,a._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,a._)("div",{class:"line-number"})])],-1),Y=(0,a._)("p",null,[(0,a.Uk)("Pour les objets, une syntaxe alternative existe pour éviter d'utiliser de manière répétitive le pipe async pour accéder à chaque champ. Sachant que chaque pipe "),(0,a._)("code",null,"async"),(0,a.Uk)(" crée une souscription et trigger de nouveau l'exécution de l'"),(0,a._)("code",null,"Observable"),(0,a.Uk)(", c'est à éviter :")],-1),Z=(0,a._)("div",{class:"language-html line-numbers-mode","data-ext":"html"},[(0,a._)("pre",{class:"language-html"},[(0,a._)("code",null,[(0,a._)("span",{class:"token comment"},"\x3c!-- A EVITER --\x3e"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"<"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("{{(user | async)?.firstName}}"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"</"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"<"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("{{(user | async)?.lastName}}"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"</"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"<"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("{{(user | async)?.age}}"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"</"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("\n\n"),(0,a._)("span",{class:"token comment"},"\x3c!-- METHODE À PREFEREE --\x3e"),(0,a.Uk)("\n@if (user | async as user) {\n  "),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"<"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("{{user.firstName}}"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"</"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"<"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("{{user.lastName}}"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"</"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"<"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("{{user.age}}"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"</"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("\n}\n\n"),(0,a._)("span",{class:"token comment"},"\x3c!-- EN UTILISANT LA SYNTAXE @let --\x3e"),(0,a.Uk)("\n@let unwrappedUser = user | async;\n"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"<"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("{{unwrappedUser?.firstName}}"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"</"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"<"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("{{unwrappedUser?.lastName}}"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"</"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("\n"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"<"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("{{unwrappedUser?.age}}"),(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token tag"},[(0,a._)("span",{class:"token punctuation"},"</"),(0,a.Uk)("p")]),(0,a._)("span",{class:"token punctuation"},">")]),(0,a.Uk)("\n")])]),(0,a._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"})])],-1),B=(0,a._)("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[(0,a._)("pre",{class:"language-typescript"},[(0,a._)("code",null,[(0,a._)("span",{class:"token decorator"},[(0,a._)("span",{class:"token at operator"},"@"),(0,a._)("span",{class:"token function"},"Component")]),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n  selector"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'app-root'"),(0,a._)("span",{class:"token punctuation"},","),(0,a.Uk)("\n  imports"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"["),(0,a.Uk)("AsyncPipe"),(0,a._)("span",{class:"token punctuation"},"]"),(0,a._)("span",{class:"token punctuation"},","),(0,a.Uk)("\n  templateUrl"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'./app.component.html'"),(0,a._)("span",{class:"token punctuation"},","),(0,a.Uk)("\n  styleUrl"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'./app.component.scss'"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token keyword"},"export"),(0,a.Uk)(),(0,a._)("span",{class:"token keyword"},"class"),(0,a.Uk)(),(0,a._)("span",{class:"token class-name"},"AppComponent"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n  user"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(" Observable"),(0,a._)("span",{class:"token operator"},"<"),(0,a.Uk)("User"),(0,a._)("span",{class:"token operator"},">"),(0,a.Uk)(),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(),(0,a._)("span",{class:"token function"},"interval"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token number"},"1000"),(0,a._)("span",{class:"token punctuation"},")"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"pipe"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token function"},"map"),(0,a._)("span",{class:"token punctuation"},"("),(0,a.Uk)("_ "),(0,a._)("span",{class:"token operator"},"=>"),(0,a.Uk)(),(0,a._)("span",{class:"token keyword"},"new"),(0,a.Uk)(),(0,a._)("span",{class:"token class-name"},"User"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token string"},"'John'"),(0,a._)("span",{class:"token punctuation"},","),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'Snow'"),(0,a._)("span",{class:"token punctuation"},","),(0,a.Uk)(),(0,a._)("span",{class:"token number"},"28"),(0,a._)("span",{class:"token punctuation"},")"),(0,a._)("span",{class:"token punctuation"},")"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n\n"),(0,a._)("span",{class:"token keyword"},"class"),(0,a.Uk)(),(0,a._)("span",{class:"token class-name"},"User"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token function"},"constructor"),(0,a._)("span",{class:"token punctuation"},"("),(0,a.Uk)("\n    "),(0,a._)("span",{class:"token keyword"},"public"),(0,a.Uk)(" firstName"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token builtin"},"string"),(0,a._)("span",{class:"token punctuation"},","),(0,a.Uk)("\n    "),(0,a._)("span",{class:"token keyword"},"public"),(0,a.Uk)(" lastName"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token builtin"},"string"),(0,a._)("span",{class:"token punctuation"},","),(0,a.Uk)("\n    "),(0,a._)("span",{class:"token keyword"},"public"),(0,a.Uk)(" age"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token builtin"},"number"),(0,a.Uk)("\n  "),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n")])]),(0,a._)("div",{class:"highlight-lines"},[(0,a._)("br"),(0,a._)("div",{class:"highlight-line"}," "),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br")]),(0,a._)("div",{class:"line-numbers","aria-hidden":"true"},[(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"}),(0,a._)("div",{class:"line-number"})])],-1),K=(0,a.uE)('<p>Aucun subscribe n&#39;étant effectué, il n&#39;est pas nécessaire d&#39;unsubscribe. Le pipe async s&#39;en charge pour nous.</p><h2 id="sommaire" tabindex="-1"><a class="header-anchor" href="#sommaire" aria-hidden="true">#</a> Sommaire</h2><div class="custom-container tip"><p class="custom-container-title">Points clés à retenir</p><ul><li>Unsubscribe ou utilisez le pipe async</li><li>N&#39;imbriquez jamais les subscribes, trouvez plutôt les bons opérateurs</li></ul></div><p>Voici un tableau des opérateurs les plus couramment utilisés.</p><table><thead><tr><th>Zone</th><th>Opérateurs</th></tr></thead><tbody><tr><td>Création</td><td>from, of, fromEvent, interval</td></tr><tr><td>Filtrage</td><td>filter, takeUntil, take, distinctUntilChanged</td></tr><tr><td>Transformation</td><td>switchMap, exhaustMap, concatMap, mergeMap, map</td></tr><tr><td>Combination</td><td>combineLatest, concat, merge, startWith, withLatestFrom, zip</td></tr><tr><td>Utilitaire</td><td>tap, finalize, catchError</td></tr></tbody></table><p>Il existe également deux constantes <code>Observable</code> : <code>NEVER</code> (n&#39;émet ni valeurs ni erreurs ni la notification complete) et <code>EMPTY</code> (n&#39;émet aucun élément et émet immédiatement une notification complete). <code>EMPTY</code> est très utile comme valeur de retour de l&#39;opérateur <code>catchError</code>.</p>',6),nn={href:"https://rxjs.dev/operator-decision-tree",target:"_blank",rel:"noopener noreferrer"},sn=(0,a.uE)('<h2 id="tp" tabindex="-1"><a class="header-anchor" href="#tp" aria-hidden="true">#</a> TP</h2><ol><li>Dans le fichier <code>film-search.component.ts</code>, arrêtez de subscribe à la réponse de recherche et utilisez plutôt un pipe async dans le template. N&#39;oubliez pas d&#39;ajouter l&#39;<code>AsyncPipe</code> au tableau <code>imports</code>.</li><li>Même si cela n&#39;est pas strictement nécessaire dans ces cas, vous pouvez vous unsubscribe des appels à login et register dans le <code>LoginFormComponent</code> en utilisant la technique <code>takeUntilDestroyed</code>.</li></ol><h2 id="pour-aller-plus-loin" tabindex="-1"><a class="header-anchor" href="#pour-aller-plus-loin" aria-hidden="true">#</a> Pour aller plus loin</h2>',3),en={href:"https://angular.dev/ecosystem/rxjs-interop",target:"_blank",rel:"noopener noreferrer"},an={},tn=(0,e(3744).Z)(an,[["render",function(n,s){const e=(0,a.up)("ExternalLinkIcon"),an=(0,a.up)("CodeGroupItem"),tn=(0,a.up)("CodeGroup");return(0,a.wg)(),(0,a.iD)("div",null,[t,(0,a._)("p",null,[(0,a._)("a",o,[(0,a.Uk)("RxJS"),(0,a.Wm)(e)]),(0,a.Uk)(" est une librairie de programmation réactive utilisant les Observables. Cela facilite la composition de code asynchrone ou basé sur des callbacks. Elle fait partie de la collection "),(0,a._)("a",p,[(0,a.Uk)("ReactiveX"),(0,a.Wm)(e)]),(0,a.Uk)(" de librairies open source (RxJava, RxSwift, Rx.NET, RxScala...). Elles partagent toutes une API très similaire, ce qui signifie que le transfert des compétences Rx d'un langage à un autre est très facile.")]),l,(0,a._)("div",i,[c,(0,a._)("p",null,[(0,a.Uk)("Ce chapitre est basé sur "),(0,a._)("a",r,[(0,a.Uk)("RxJS v7"),(0,a.Wm)(e)]),(0,a.Uk)(", la version utilisée par Angular 15.")])]),u,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a.Uk)("interval ("),(0,a._)("a",d,[(0,a.Uk)("marble"),(0,a.Wm)(e)]),(0,a.Uk)(" / "),(0,a._)("a",k,[(0,a.Uk)("documentation"),(0,a.Wm)(e)]),(0,a.Uk)(")")])]),m,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a.Uk)("transformation de promesse ("),(0,a._)("a",b,[(0,a.Uk)("marble"),(0,a.Wm)(e)]),(0,a.Uk)(" / "),(0,a._)("a",v,[(0,a.Uk)("documentation"),(0,a.Wm)(e)]),(0,a.Uk)(")")])]),_,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a.Uk)("transformation d'événement du navigateur ("),(0,a._)("a",g,[(0,a.Uk)("documentation"),(0,a.Wm)(e)]),(0,a.Uk)(")")])]),h,(0,a._)("p",null,[(0,a.Uk)("Semblable à la fonction bien connue "),f,(0,a.Uk)(", l'opérateur "),U,(0,a.Uk)(" ("),(0,a._)("a",x,[(0,a.Uk)("marble"),(0,a.Wm)(e)]),(0,a.Uk)(" / "),(0,a._)("a",y,[(0,a.Uk)("documentation"),(0,a.Wm)(e)]),(0,a.Uk)(") applique une projection à chaque valeur et émet cette projection dans l'"),w,(0,a.Uk)(" de sortie.")]),q,E,z,(0,a._)("p",null,[(0,a.Uk)("Similaire à la fonction "),C,(0,a.Uk)(", l'opérateur "),O,(0,a.Uk)(" ("),(0,a._)("a",j,[(0,a.Uk)("marble"),(0,a.Wm)(e)]),(0,a.Uk)(" / "),(0,a._)("a",S,[(0,a.Uk)("documentation"),(0,a.Wm)(e)]),(0,a.Uk)(") filtre les éléments émis par l'Observable source en n'émettant que ceux qui satisfont un prédicat spécifié.")]),R,(0,a._)("p",null,[(0,a.Uk)("Ce comportement n'est pas toujours celui souhaité. RxJS fournit un opérateur "),P,(0,a.Uk)(" ("),(0,a._)("a",L,[(0,a.Uk)("documentation"),(0,a.Wm)(e)]),(0,a.Uk)(") pour traiter l'erreur de manière \"silencieuse\", ce qui signifie qu'il s'agit du callback "),N,(0,a.Uk)(" et non celui "),W,(0,a.Uk)(" qui est appelé.")]),A,(0,a._)("p",null,[(0,a.Uk)("Il est assez courant de devoir enchaîner les appels backend. Par exemple, l'utilisateur vient de modifier une ressource et vous souhaitez que votre page affiche ses détails mis à jour. Certains backends renvoient les détails de la ressource mise à jour dans le corps de la réponse à l'appel d'édition. Cependant, certains renvoient simplement une réponse HTTP 200 ou 204 sans corps. Cela signifie que l'appel de modification et l'appel de détail doivent être chaînés pour mettre à jour l'interface utilisateur. RxJS fournit plusieurs opérateurs pour enchaîner les événements de manière déclarative. Nous utiliserons l'opérateur "),M,(0,a.Uk)(" ("),(0,a._)("a",T,[(0,a.Uk)("documentation"),(0,a.Wm)(e)]),(0,a.Uk)(" / "),(0,a._)("a",I,[(0,a.Uk)("marble"),(0,a.Wm)(e)]),(0,a.Uk)(") dans ce cas. Vous pouvez l'essayer dans le Stackblitz ci-dessous (cliquez n'importe où sur l'aperçu et voyez ce qu'il se passe dans la console, cliquez à nouveau et voyez comment les choses changent dans la console).")]),J,D,F,(0,a._)("p",null,[(0,a.Uk)("Un autre opérateur utile pour combiner les appels est "),H,(0,a.Uk)(" ("),(0,a._)("a",Q,[(0,a.Uk)("documentation"),(0,a.Wm)(e)]),(0,a.Uk)("). Alors que "),V,(0,a.Uk)(" annule l'abonnement à l'Observable projeté précédent, exhaustMap ignore les nouveaux événements tant que l'Observable projeté précédent n'est pas terminé.")]),$,(0,a.Wm)(tn,null,{default:(0,a.w5)((()=>[(0,a.Wm)(an,{title:"Component class"},{default:(0,a.w5)((()=>[G])),_:1}),(0,a.Wm)(an,{title:"Component template"},{default:(0,a.w5)((()=>[X])),_:1})])),_:1}),Y,(0,a.Wm)(tn,null,{default:(0,a.w5)((()=>[(0,a.Wm)(an,{title:"Component template"},{default:(0,a.w5)((()=>[Z])),_:1}),(0,a.Wm)(an,{title:"Component class"},{default:(0,a.w5)((()=>[B])),_:1})])),_:1}),K,(0,a._)("p",null,[(0,a.Uk)("Pour vous aider à décider quel opérateur correspond à votre cas d'utilisation, la documentation RxJS fournit un "),(0,a._)("a",nn,[(0,a.Uk)("arbre de décision d'opérateur"),(0,a.Wm)(e)]),(0,a.Uk)(". Cela aide également à découvrir les nombreux opérateurs fournis par RxJS.")]),sn,(0,a._)("p",null,[(0,a.Uk)("Angular fournit des fonctions pour inter opérer entre les Signaux et les Observables. La documentation se trouve "),(0,a._)("a",en,[(0,a.Uk)("ici"),(0,a.Wm)(e)]),(0,a.Uk)(".")])])}]])},4944:(n,s,e)=>{e.r(s),e.d(s,{data:()=>a});const a=JSON.parse('{"key":"v-7ba3cfc0","path":"/fr/rxjs.html","title":"RxJS","lang":"fr-FR","frontmatter":{},"headers":[{"level":2,"title":"L\'Observable","slug":"l-observable","link":"#l-observable","children":[]},{"level":2,"title":"Création d\'Observable","slug":"creation-d-observable","link":"#creation-d-observable","children":[]},{"level":2,"title":"Filtrage et mapping","slug":"filtrage-et-mapping","link":"#filtrage-et-mapping","children":[]},{"level":2,"title":"La gestion des erreurs","slug":"la-gestion-des-erreurs","link":"#la-gestion-des-erreurs","children":[]},{"level":2,"title":"Composition de flux","slug":"composition-de-flux","link":"#composition-de-flux","children":[]},{"level":2,"title":"Unsubscribing","slug":"unsubscribing","link":"#unsubscribing","children":[]},{"level":2,"title":"Pipe async","slug":"pipe-async","link":"#pipe-async","children":[]},{"level":2,"title":"Sommaire","slug":"sommaire","link":"#sommaire","children":[]},{"level":2,"title":"TP","slug":"tp","link":"#tp","children":[]},{"level":2,"title":"Pour aller plus loin","slug":"pour-aller-plus-loin","link":"#pour-aller-plus-loin","children":[]}],"git":{},"filePathRelative":"fr/rxjs.md"}')}}]);