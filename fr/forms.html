<!DOCTYPE html>
<html lang="fr-FR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.60">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="logo.png"><meta name="theme-color" content="#8514F5"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Formulaires | Formation Angular</title><meta name="description" content="Support de formation Angular">
    <link rel="stylesheet" href="/angular-training/assets/css/styles.d4c6a8a0.css">
    <link rel="preload" href="/angular-training/assets/js/runtime~app.a825557b.js" as="script"><link rel="preload" href="/angular-training/assets/css/styles.d4c6a8a0.css" as="style"><link rel="preload" href="/angular-training/assets/js/966.6bc1d20f.js" as="script"><link rel="preload" href="/angular-training/assets/js/app.2146f142.js" as="script"><link rel="preload" href="/angular-training/assets/js/v-4de770d4.688623d8.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-47a172f9.291bf16d.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-406818d6.121aa16d.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-7c58cd95.88b1841b.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-335946b2.0a9b9405.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-43e14fc6.215e05d9.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-0b5ef6ea.c8cafacc.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-06867140.fc4ed588.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-41615831.c02b75ba.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-0f3c5d64.2f8c6ae0.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-04259cc7.31930dc5.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-7ba3cfc0.c87d4cf7.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-56a51099.e44197e4.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-66e9a7bd.d030d97c.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-76b3265c.57617f1a.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-dcd2f7ce.4327d6ae.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-9f781948.3185612a.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-409dd4d7.206b4a5f.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-2f91e384.08bd7d0b.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-4a251b7e.f39af1e0.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-40885816.ed77776b.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-5753ab72.67971a99.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-7d1f12dc.2220acb2.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-a7994716.0eac4074.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-00a299a3.bc486f42.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-29b14426.ecbd918e.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-2d0a8b4a.e5989778.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-8daa1a0e.642f4708.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/783.d3c36333.js" as="script"><link rel="prefetch" href="/angular-training/assets/js/v-3706649a.39bfcd51.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/angular-training/fr/" class=""><!----><span class="site-name can-hide">Formation Angular</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Langue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Langue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/angular-training/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/angular-training/fr/forms.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Langue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Langue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/angular-training/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/angular-training/fr/forms.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/angular-training/fr/presentation.html" class="sidebar-item sidebar-heading" aria-label="Présentation d&#39;Angular"><!--[--><!--]--> Présentation d&#39;Angular <!--[--><!--]--></a><!----></li><li><a href="/angular-training/fr/typescript.html" class="sidebar-item sidebar-heading" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a><!----></li><li><a href="/angular-training/fr/tooling.html" class="sidebar-item sidebar-heading" aria-label="Outillage"><!--[--><!--]--> Outillage <!--[--><!--]--></a><!----></li><li><a href="/angular-training/fr/first-steps.html" class="sidebar-item sidebar-heading" aria-label="Premiers pas"><!--[--><!--]--> Premiers pas <!--[--><!--]--></a><!----></li><li><a href="/angular-training/fr/template.html" class="sidebar-item sidebar-heading" aria-label="Dynamisez votre HTML"><!--[--><!--]--> Dynamisez votre HTML <!--[--><!--]--></a><!----></li><li><a href="/angular-training/fr/pipes.html" class="sidebar-item sidebar-heading" aria-label="Pipes"><!--[--><!--]--> Pipes <!--[--><!--]--></a><!----></li><li><a href="/angular-training/fr/components.html" class="sidebar-item sidebar-heading" aria-label="Composants"><!--[--><!--]--> Composants <!--[--><!--]--></a><!----></li><li><a href="/angular-training/fr/routing.html" class="sidebar-item sidebar-heading" aria-label="Routage"><!--[--><!--]--> Routage <!--[--><!--]--></a><!----></li><li><a href="/angular-training/fr/services.html" class="sidebar-item sidebar-heading" aria-label="Services"><!--[--><!--]--> Services <!--[--><!--]--></a><!----></li><li><a href="/angular-training/fr/rxjs.html" class="sidebar-item sidebar-heading" aria-label="RxJS"><!--[--><!--]--> RxJS <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/angular-training/fr/forms.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="Formulaires"><!--[--><!--]--> Formulaires <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/angular-training/fr/forms.html#template-driven-forms" class="router-link-active router-link-exact-active sidebar-item" aria-label="Template-driven forms"><!--[--><!--]--> Template-driven forms <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/angular-training/fr/forms.html#reactive-forms" class="router-link-active router-link-exact-active sidebar-item" aria-label="Reactive forms"><!--[--><!--]--> Reactive forms <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/angular-training/fr/forms.html#classes-css-gerees-par-angular" class="router-link-active router-link-exact-active sidebar-item" aria-label="Classes CSS gérées par Angular"><!--[--><!--]--> Classes CSS gérées par Angular <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/angular-training/fr/forms.html#tp-connexion-et-inscription-avec-des-reactive-forms" class="router-link-active router-link-exact-active sidebar-item" aria-label="TP : Connexion et inscription avec des reactive forms"><!--[--><!--]--> TP : Connexion et inscription avec des reactive forms <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/angular-training/fr/forms.html#sources" class="router-link-active router-link-exact-active sidebar-item" aria-label="Sources"><!--[--><!--]--> Sources <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/angular-training/fr/to-go-further.html" class="sidebar-item sidebar-heading" aria-label="Pour aller plus loin"><!--[--><!--]--> Pour aller plus loin <!--[--><!--]--></a><!----></li><li><a href="/angular-training/fr/ecosystem.html" class="sidebar-item sidebar-heading" aria-label="Écosystème d&#39;Angular"><!--[--><!--]--> Écosystème d&#39;Angular <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="formulaires" tabindex="-1"><a class="header-anchor" href="#formulaires" aria-hidden="true">#</a> Formulaires</h1><p>Les formulaires permettent à l&#39;application Web d&#39;obtenir des entrées utilisateur. Un formulaire est généralement composé d&#39;un élément de formulaire (<code>&lt;form&gt;&lt;/form&gt;</code>) qui contient des éléments d&#39;entrée (<code>&lt;input /&gt;</code>) et d&#39;un bouton d&#39;envoi (<code>&lt;button type=&quot;submit&quot;&gt;&lt;/button&gt; </code>). Lorsque l&#39;utilisateur soumet le formulaire, il est traité localement par l&#39;application Web. Celle-ci peut choisir d&#39;envoyer des données au serveur à l&#39;aide du client HTTP.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Dans une SPA, les formulaires ne redirigent pas vers une page serveur lorsque l&#39;utilisateur les publie (comme en PHP par exemple). Cependant, la SPA peut récupérer les données du formulaire à partir du template et les envoyer au serveur si nécessaire à l&#39;aide d&#39;un appel HTTP asynchrone.</p></div><p>Angular simplifie les tâches courantes liées à la création et au traitement des formulaires, telles que le data-binding entre le template et la classe du composant, la validation et l&#39;envoi des données au serveur. Ceci est possible en utilisant l&#39;un ou l&#39;autre de ces deux types de formulaires :</p><ul><li>Template-driven forms : simples à utiliser mais beaucoup moins scalables que les formulaires réactifs et conviennent parfaitement aux formulaires simples avec peu d&#39;inputs et peu ou pas de règles de validation.</li><li>Reactive forms : ont une courbe d&#39;apprentissage abrupte mais offrent plus d&#39;avantages en termes de gestion de cas d&#39;utilisation complexes, de scalabilité, de réutilisabilité et de testabilité. Leur implémentation est basée sur RxJS.</li></ul><h2 id="template-driven-forms" tabindex="-1"><a class="header-anchor" href="#template-driven-forms" aria-hidden="true">#</a> Template-driven forms</h2><p>Comme leur nom l&#39;indique, les formulaires Template-driven sont entièrement définis dans le template du composant. La valeur de l&#39;input peut être récupérée dans la classe du composant grâce à la directive <code>NgModel</code>. Comme vous vous en souvenez peut-être, nous l&#39;avons utilisé dans le chapitre <em>Dynamisez votre HTML</em> pour commander des glaces.</p><p>Voici un exemple qui utilise <code>[(ngModel)]</code> pour récupérer les valeurs d&#39;un champ <code>input</code> et d&#39;un champ <code>select</code>. Il montre également comment obtenir une référence au champ de formulaire (<code>#nameRef=&quot;ngModel&quot;</code>). Cela permet d&#39;obtenir certaines propriétés sur le champ du formulaire comme son statut de validité (<code>nameRef.valid</code>).</p><iframe height="500" width="100%" src="https://stackblitz.com/github/worldline/atpw-template-driven-form/tree/master?startScript=start&amp;title=Template-Driven Form&amp;ctl=1&amp;embed=1&amp;file=src/app/app.component.ts"></iframe><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>N&#39;oubliez pas d&#39;importer <code>FormsModule</code> lors de l&#39;utilisation des template-driven forms</p></div><p>Si vous regroupez les champs du formulaire dans un élément <code>form</code> (ce que vous devriez absolument faire), vous pourrez profiter de ces possibilités :</p><ul><li>Obtenir une référence à l&#39;ensemble du formulaire en capturant <code>ngForm</code> (exemple : <code>#formRef=&quot;ngForm&quot;</code>). Cela permet, par exemple, d&#39;obtenir le statut de validité de l&#39;ensemble du formulaire</li><li>Écouter l&#39;événement de soumission du formulaire en utilisant <code>(ngSubmit)</code></li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Préférez écouter <code>(ngSubmit)</code> sur la balise <code>&lt;form&gt;</code> plutôt que le <code>(click)</code> sur le bouton de soumission car le premier prend en charge la soumission via la touche <em>entrer</em> du clavier et augmente l&#39;accessibilité du formulaire .</p></div><p>Le projet suivant illustre l&#39;utilisation de <code>ngForm</code> et <code>(ngSubmit)</code></p><iframe height="500" width="100%" src="https://stackblitz.com/github/worldline/atpw-template-driven-form/tree/submit-exemple?startScript=start&amp;title=Template-Driven Form&amp;ctl=1&amp;embed=1&amp;file=src/app/app.component.ts"></iframe><p><strong>Exercice : ajoutez un champ de saisie qui doit avoir une longueur minimale de 5 caractères. Affichez le contenu de ce champ lors de la soumission du formulaire</strong></p><h2 id="reactive-forms" tabindex="-1"><a class="header-anchor" href="#reactive-forms" aria-hidden="true">#</a> Reactive forms</h2><p>Les reactive forms permettent de lier l&#39;ensemble de l&#39;élément de formulaire HTML à son homologue dans la classe du composant. Cela permet de combiner les fonctionnalités de <code>ngModel</code> et des références de champs de formulaire en un seul concept qui est un <code>FormControl</code> pour un seul champ de formulaire et un <code>FormGroup</code> pour un groupe de champs de formulaire. Veuillez noter que <code>FormControl</code>, <code>FormGroup</code> et d&#39;autres éléments des reactive forms sont définis dans le <code>ReactiveFormsModule</code>.</p><h3 id="form-control" tabindex="-1"><a class="header-anchor" href="#form-control" aria-hidden="true">#</a> Form control</h3><p>Un <code>FormControl</code> est une classe qui enveloppe la valeur ainsi que d&#39;autres informations d&#39;un champ de formulaire.</p><p>Le projet suivant réécrit le premier exemple de la section précédente à l&#39;aide d&#39;un reactive form. Ici, nous définissons les objets <code>FormControl</code> et les lions à leur contrepartie dans le template avec <code>[formControl]</code>. La valeur de l&#39;attribut doit avoir le même nom que la propriété dans le composant. Comme vous pouvez le constater dans le template, la valeur et le statut valide des champs de formulaire sont obtenus directement à partir de l&#39;instance de form control.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Notez que l&#39;utilisation de FormControls en dehors d&#39;un FormGroup est très inhabituelle.</p></div><iframe height="500" width="100%" src="https://stackblitz.com/github/worldline/atpw-template-driven-form/tree/reactive-form-transformation?startScript=start&amp;title=FormControl&amp;ctl=1&amp;embed=1&amp;file=src/app/app.component.ts"></iframe><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>N&#39;oubliez pas d&#39;importer le <code>ReactiveFormsModule</code> lors de l&#39;utilisation des reactive forms</p></div><h3 id="form-group" tabindex="-1"><a class="header-anchor" href="#form-group" aria-hidden="true">#</a> Form group</h3><p>Un <code>FormGroup</code> est une collection de form controls regroupés. Il se compose d&#39;une instance <code>FormGroup</code> qui est liée dans le template à une balise <code>&lt;form&gt;</code> via l&#39;attribut <code>[formGroup]</code>. Veuillez noter que les contrôles et les groupes enfants utilisent respectivement les attributs <code>formControlName</code> et <code>formGroupName</code> dans le template.</p><p>Le composant suivant définit un <code>FormGroup</code> qui contient des form controls et un autre form group. Il illustre de nombreux cas d&#39;utilisation liés aux formulaires : obtenir la valeur du formulaire, son statut, définir des validateurs sur le form control ou dans le template, et accéder aux form group enfants à l&#39;aide de la propriété <code>controls</code>.</p><iframe height="500" width="100%" src="https://stackblitz.com/github/worldline/atpw-reactive-form/tree/master?startScript=start&amp;title=FormGroup&amp;ctl=1&amp;embed=1&amp;file=src/app/app.component.ts"></iframe><h3 id="form-builder" tabindex="-1"><a class="header-anchor" href="#form-builder" aria-hidden="true">#</a> Form builder</h3><p>Le <code>ReactiveFormsModule</code> d&#39;Angular fournit une API plus simple pour créer des FormGroups et des FormControls via le service <code>FormBuilder</code>. L&#39;extrait de code suivant montre comment convertir la déclaration du FormGroup précédente à l&#39;aide de l&#39;API <code>FormBuilder</code>.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// before</span>
<span class="token keyword">protected</span> <span class="token keyword">readonly</span> iceCreamForm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormGroup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  customerName<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token string">&#39;Charlotte Smith&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  flavor<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> Validators<span class="token punctuation">.</span>required<span class="token punctuation">)</span><span class="token punctuation">,</span>
  toppings<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">FormGroup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    first<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token string">&#39;Whipped cream&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    second<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token string">&#39;Chocolate sauce&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//after</span>
<span class="token keyword">private</span> <span class="token keyword">readonly</span> fb <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span>NonNullableFormBuilder<span class="token punctuation">)</span> <span class="token comment">//do not forget to inject the service</span>

<span class="token keyword">protected</span> <span class="token keyword">readonly</span> iceCreamForm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fb<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  customerName<span class="token operator">:</span> <span class="token string">&#39;Charlotte Smith&#39;</span><span class="token punctuation">,</span>
  flavor<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> Validators<span class="token punctuation">.</span>required<span class="token punctuation">]</span><span class="token punctuation">,</span>
  toppings<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fb<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    first<span class="token operator">:</span> <span class="token string">&#39;Whipped cream&#39;</span><span class="token punctuation">,</span>
    second<span class="token operator">:</span> <span class="token string">&#39;Chocolate sauce&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Veuillez trouver ci-dessous un exemple complet utilisant l&#39;API <code>FormBuilder</code>.</p><iframe height="500" width="100%" src="https://stackblitz.com/github/worldline/atpw-reactive-form/tree/form-builder?startScript=start&amp;title=FormBuilder&amp;ctl=1&amp;embed=1&amp;file=src/app/app.component.ts"></iframe><h3 id="validation-de-reactive-form" tabindex="-1"><a class="header-anchor" href="#validation-de-reactive-form" aria-hidden="true">#</a> Validation de reactive form</h3><p>Le <code>ReactiveFormsModule</code> permet de définir des validateurs dans le code du composant ou en utilisant des attributs de validation HTML5 tels que <code>required</code> et <code>minlength</code>. Angular fournit des validateurs intégrés tels que <code>Validators.required</code>, <code>Validators.min</code>, <code>Validators.pattern</code>, vous pouvez trouver une liste complète [ici] (https://angular.dev/api/forms/Validators). Vous pouvez également définir des validateurs personnalisés (<a href="https://angular.dev/guide/forms/form-validation#defining-custom-validators" target="_blank" rel="noopener noreferrer">tutoriel<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>).</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Lorsque vous utilisez des validateurs HTML5, Angular recommande de les combiner avec les validateurs fournis par <code>@angular/forms</code>.</p></div><p>Le composant suivant illustre l&#39;utilisation de plusieurs validateurs sur un form control ainsi que l&#39;utilisation d&#39;un validateur personnalisé.</p><iframe height="500" width="100%" src="https://stackblitz.com/github/worldline/atpw-reactive-form/tree/validation?startScript=start&amp;title=Form Validation&amp;ctl=1&amp;embed=1&amp;file=src/app/app.component.ts"></iframe><h2 id="classes-css-gerees-par-angular" tabindex="-1"><a class="header-anchor" href="#classes-css-gerees-par-angular" aria-hidden="true">#</a> Classes CSS gérées par Angular</h2><p>Angular ajoute et supprime automatiquement des styles spécifiques en fonction de l&#39;état du formulaire. Par exemple, lorsqu&#39;un form control/group est invalide, Angular ajoute à son élément HTML la classe <code>.ng-invalid</code>. Lorsque le form control/group devient valide, Angular remplace la classe <code>.ng-invalid</code> par la classe <code>.ng-valid</code>.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Lorsqu&#39;un form control devient invalide, lui et ses controls parent se voient attribuer la classe <code>.ng-invalid</code>. Si ce comportement n&#39;est pas souhaité, vous pouvez utiliser des pseudo-classes telles que <code>:not</code>.</p></div><p>Le composant suivant montre comment tirer parti :</p><ul><li>des classes <code>.ng-invalid</code> et <code>.ng-dirty</code></li><li>de la <code>:not</code> pseudo-classe pour cibler uniquement le form control.</li></ul><iframe height="500" width="100%" src="https://stackblitz.com/github/worldline/atpw-reactive-form/tree/css-classes?startScript=start&amp;title=Angular-managed CSS classes&amp;ctl=1&amp;embed=1&amp;file=src/app/app.component.ts"></iframe><p>Vous pouvez trouver une liste à jour des classes <a href="https://angular.dev/guide/forms/form-validation#control-status-css-classes" target="_blank" rel="noopener noreferrer">ici<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="tp-connexion-et-inscription-avec-des-reactive-forms" tabindex="-1"><a class="header-anchor" href="#tp-connexion-et-inscription-avec-des-reactive-forms" aria-hidden="true">#</a> TP : Connexion et inscription avec des reactive forms</h2><ol><li><p>Implémentez le formulaire de connexion / inscription à l&#39;aide de reactive forms et du form builder : remplacez le <code>[(ngModel)]</code> dans le template et supprimez les propriétés <code>email</code> et <code>mot de passe</code> de la classe du <code>LoginFormComponent</code> et déclarez un <code>FormGroup</code> et nommez le <code>loginForm</code>.</p></li><li><p>Ajoutez le validateur required (<code>Validators.required</code>) aux deux champs et affichez le texte <code>&quot;Ce champ est requis&quot;</code> sous chaque champ si le formulaire a un statut dirty et que ce champ a l&#39;erreur <code>required</code> :</p></li></ol><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">&gt;</span></span>This field is required<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">Hint</p><ul><li>Il est possible de récupérer la référence à une instance d&#39;un <code>FormControl</code> en utilisant la propriété <code>controls</code> du <code>FormGroup</code> le contenant. Par exemple pour un <code>FormGroup</code> nommé <em>myFormGroup</em> et un <code>FormControl</code> nommé <em>myControl</em>:</li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>myFormGroup<span class="token punctuation">.</span>controls<span class="token punctuation">.</span>myControl<span class="token punctuation">.</span>touched
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>Il est possible de vérifier si un <code>FormControl</code> (ou plus généralement un <code>AbstractControl</code>) a une erreur spécifique en appelant la méthode <code>hasError(&#39;error name&#39;)</code> de la classe <code>FormControl</code>.Par exemple pour un <code>FormGroup</code> nommé <em>myFormGroup</em>, un <code>FormControl</code> nommé <em>myControl</em> et une erreur <em>required</em> :</li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>myFormGroup<span class="token punctuation">.</span>controls<span class="token punctuation">.</span>myControl<span class="token punctuation">.</span><span class="token function">hasError</span><span class="token punctuation">(</span><span class="token string">&#39;required&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><ol start="3"><li>Stylisez le label et le texte d&#39;erreur de chaque input s&#39;étant fait attribuer la classe <code>.ng-invalid</code> par angular mais uniquement lorsque le formulaire a la classe <code>ng-dirty</code>. Faites attention à ne bien styliser que ces deux éléments pour chaque input (vous pouvez utiliser le combinateur CSS <code>+</code> et la pseudo-classe <code>has()</code> à cet effet).</li></ol><details class="custom-container details"><summary>Aide</summary><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has" target="_blank" rel="noopener noreferrer">has() pseudo classe<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Next-sibling_combinator" target="_blank" rel="noopener noreferrer">+ combinateur<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></details><details class="custom-container details"><summary>Correction</summary><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">form label:has(+ input.ng-invalid.ng-dirty), form.ng-dirty input.ng-invalid.ng-dirty + small</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><ol start="4"><li><p>Désactivez les boutons Connexion et Inscription à l&#39;aide de l&#39;attribut <code>[disabled]</code> si le formulaire est <em>invalid</em> et <em>dirty</em>.</p></li><li><p>Définissez un validateur personnalisé pour le champ de mot de passe qui refuse les mots de passe faibles. Nous considérerons qu&#39;un mot de passe est fort s&#39;il satisfait à toutes ces exigences :</p></li></ol><ul><li>Contient au moins un caractère majuscule (regex <code>/^.*[A-Z]+.*$/</code>)</li><li>Contient au moins un caractère minuscule (regex <code>/^.*[a-z]+.*$/</code>)</li><li>Possède au moins un caractère non alphanumérique (regex <code>/^.*\W+.*$/</code>)</li><li>Longueur minimale de 8 caractères</li></ul><p>Vous pouvez utiliser la méthode <code>test</code> sur chaque pattern/regex et leur passer la valeur du form control pour vérifier si le pattern y est présent.</p><p>Mettez ce validateur dans <code>app/utils</code> et nommez-le <code>password.validator.ts</code>.</p><details class="custom-container details"><summary>Aide</summary><p>Voici son implémentation de base :</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">password</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> ValidatorFn <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>control<span class="token operator">:</span> AbstractControl<span class="token punctuation">)</span><span class="token operator">:</span> ValidationErrors <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> uppercasePattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^.*[A-Z]+.*$</span><span class="token regex-delimiter">/</span></span>
    <span class="token keyword">const</span> lowercasePattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^.*[a-z]+.*$</span><span class="token regex-delimiter">/</span></span>
    <span class="token keyword">const</span> specialCharPattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^.*\W+.*$</span><span class="token regex-delimiter">/</span></span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>control<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      uppercasePattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>control<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      lowercasePattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>control<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      specialCharPattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>control<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      control<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">8</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;password.pattern&#39;</span><span class="token operator">:</span> <span class="token string">&#39;Password format is incorrect&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>Ajoutez un texte d&#39;erreur (<code>Mot de passe invalide</code>) via la balise <code>&lt;small&gt;</code> en dessous de l&#39;input du mot de passe qui s&#39;affiche si le formulaire est invalide et que l&#39;input a l&#39;erreur <code>password.pattern</code>.</p><h2 id="sources" tabindex="-1"><a class="header-anchor" href="#sources" aria-hidden="true">#</a> Sources</h2><ul><li><a href="https://angular.dev/guide/forms" target="_blank" rel="noopener noreferrer">Documentation officielle des formulaires Angular<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/angular-training/fr/rxjs.html" class="" aria-label="RxJS"><!--[--><!--]--> RxJS <!--[--><!--]--></a></span><span class="next"><a href="/angular-training/fr/to-go-further.html" class="" aria-label="Pour aller plus loin"><!--[--><!--]--> Pour aller plus loin <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/angular-training/assets/js/v-4de770d4.688623d8.js" defer></script><script src="/angular-training/assets/js/runtime~app.a825557b.js" defer></script><script src="/angular-training/assets/js/966.6bc1d20f.js" defer></script><script src="/angular-training/assets/js/app.2146f142.js" defer></script>
  </body>
</html>
